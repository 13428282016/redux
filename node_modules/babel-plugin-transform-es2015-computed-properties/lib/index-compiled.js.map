{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["\"use strict\";\n\nvar _getIterator = require(\"babel-runtime/core-js/get-iterator\")[\"default\"];\n\nexports.__esModule = true;\n\nexports[\"default\"] = function (_ref5) {\n  var t = _ref5.types;\n  var template = _ref5.template;\n\n  var buildMutatorMapAssign = template(\"\\n    MUTATOR_MAP_REF[KEY] = MUTATOR_MAP_REF[KEY] || {};\\n    MUTATOR_MAP_REF[KEY].KIND = VALUE;\\n  \");\n\n  function getValue(prop) {\n    if (t.isObjectProperty(prop)) {\n      return prop.value;\n    } else if (t.isObjectMethod(prop)) {\n      return t.functionExpression(null, prop.params, prop.body, prop.generator, prop.async);\n    }\n  }\n\n  function pushAssign(objId, prop, body) {\n    if (prop.kind === \"get\" && prop.kind === \"set\") {\n      pushMutatorDefine(objId, prop, body);\n    } else {\n      body.push(t.expressionStatement(t.assignmentExpression(\"=\", t.memberExpression(objId, prop.key, prop.computed || t.isLiteral(prop.key)), getValue(prop))));\n    }\n  }\n\n  function pushMutatorDefine(_ref6, prop) {\n    var objId = _ref6.objId;\n    var body = _ref6.body;\n    var getMutatorId = _ref6.getMutatorId;\n    var scope = _ref6.scope;\n\n    var key = prop.key;\n\n    var maybeMemoise = scope.maybeGenerateMemoised(prop.key);\n    if (maybeMemoise) {\n      body.push(t.expressionStatement(t.assignmentExpression(\"=\", maybeMemoise, key)));\n      key = maybeMemoise;\n    }\n\n    body.push.apply(body, buildMutatorMapAssign({\n      MUTATOR_MAP_REF: getMutatorId(),\n      KEY: key,\n      VALUE: getValue(prop),\n      KIND: t.identifier(prop.kind)\n    }));\n  }\n\n  function loose(info) {\n    for (var _iterator = info.computedProps, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _getIterator(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var prop = _ref;\n\n      if (prop.kind === \"get\" || prop.kind === \"set\") {\n        pushMutatorDefine(info, prop);\n      } else {\n        pushAssign(info.objId, prop, info.body);\n      }\n    }\n  }\n\n  function spec(info) {\n    var objId = info.objId;\n    var body = info.body;\n    var computedProps = info.computedProps;\n    var state = info.state;\n\n    for (var _iterator2 = computedProps, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _getIterator(_iterator2);;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var prop = _ref2;\n\n      var key = t.toComputedKey(prop);\n\n      if (prop.kind === \"get\" || prop.kind === \"set\") {\n        pushMutatorDefine(info, prop);\n      } else if (t.isStringLiteral(key, { value: \"__proto__\" })) {\n        pushAssign(objId, prop, body);\n      } else {\n        if (computedProps.length === 1) {\n          return t.callExpression(state.addHelper(\"defineProperty\"), [info.initPropExpression, key, getValue(prop)]);\n        } else {\n          body.push(t.expressionStatement(t.callExpression(state.addHelper(\"defineProperty\"), [objId, key, getValue(prop)])));\n        }\n      }\n    }\n  }\n\n  return {\n    visitor: {\n      ObjectExpression: {\n        exit: function exit(path, state) {\n          var node = path.node;\n          var parent = path.parent;\n          var scope = path.scope;\n\n          var hasComputed = false;\n          for (var _iterator3 = (node.properties /*: Array<Object>*/), _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _getIterator(_iterator3);;) {\n            var _ref3;\n\n            if (_isArray3) {\n              if (_i3 >= _iterator3.length) break;\n              _ref3 = _iterator3[_i3++];\n            } else {\n              _i3 = _iterator3.next();\n              if (_i3.done) break;\n              _ref3 = _i3.value;\n            }\n\n            var prop = _ref3;\n\n            hasComputed = prop.computed === true;\n            if (hasComputed) break;\n          }\n          if (!hasComputed) return;\n\n          // put all getters/setters into the first object expression as well as all initialisers up\n          // to the first computed property\n\n          var initProps = [];\n          var computedProps = [];\n          var foundComputed = false;\n\n          for (var _iterator4 = node.properties, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _getIterator(_iterator4);;) {\n            var _ref4;\n\n            if (_isArray4) {\n              if (_i4 >= _iterator4.length) break;\n              _ref4 = _iterator4[_i4++];\n            } else {\n              _i4 = _iterator4.next();\n              if (_i4.done) break;\n              _ref4 = _i4.value;\n            }\n\n            var prop = _ref4;\n\n            if (prop.computed) {\n              foundComputed = true;\n            }\n\n            if (foundComputed) {\n              computedProps.push(prop);\n            } else {\n              initProps.push(prop);\n            }\n          }\n\n          var objId = scope.generateUidIdentifierBasedOnNode(parent);\n          var initPropExpression = t.objectExpression(initProps);\n          var body = [];\n\n          body.push(t.variableDeclaration(\"var\", [t.variableDeclarator(objId, initPropExpression)]));\n\n          var callback = spec;\n          if (state.opts.loose) callback = loose;\n\n          var mutatorRef = undefined;\n\n          var getMutatorId = function getMutatorId() {\n            if (!mutatorRef) {\n              mutatorRef = scope.generateUidIdentifier(\"mutatorMap\");\n\n              body.push(t.variableDeclaration(\"var\", [t.variableDeclarator(mutatorRef, t.objectExpression([]))]));\n            }\n\n            return mutatorRef;\n          };\n\n          var single = callback({\n            scope: scope,\n            objId: objId,\n            body: body,\n            computedProps: computedProps,\n            initPropExpression: initPropExpression,\n            getMutatorId: getMutatorId,\n            state: state\n          });\n\n          if (mutatorRef) {\n            body.push(t.expressionStatement(t.callExpression(state.addHelper(\"defineEnumerableProperties\"), [objId, mutatorRef])));\n          }\n\n          if (single) {\n            path.replaceWith(single);\n          } else {\n            body.push(t.expressionStatement(objId));\n            path.replaceWithMultiple(body);\n          }\n        }\n      }\n    }\n  };\n};\n\nmodule.exports = exports[\"default\"];"]}