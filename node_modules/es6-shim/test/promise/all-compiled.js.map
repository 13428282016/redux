{"version":3,"sources":["all.js"],"names":[],"mappings":"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","file":"all-compiled.js","sourcesContent":["/* global it, describe, expect, assert, Promise */\n\nvar failIfThrows = function (done) {\n  'use strict';\n\n  return function (e) { done(e || new Error()); };\n};\n\ndescribe('Promise.all', function () {\n  'use strict';\n\n  it('should not be enumerable', function () {\n    expect(Promise).ownPropertyDescriptor('all').to.have.property('enumerable', false);\n  });\n\n  it('fulfills if passed an empty array', function (done) {\n    var iterable = [];\n\n    Promise.all(iterable).then(function (value) {\n      assert(Array.isArray(value));\n      assert.deepEqual(value, []);\n    }).then(done, failIfThrows(done));\n  });\n\n  it('fulfills if passed an empty array-like', function (done) {\n    var f = function () {\n      Promise.all(arguments).then(function (value) {\n        assert(Array.isArray(value));\n        assert.deepEqual(value, []);\n      }).then(done, failIfThrows(done));\n    };\n    f();\n  });\n\n  it('fulfills if passed an array of mixed fulfilled promises and values', function (done) {\n    var iterable = [0, Promise.resolve(1), 2, Promise.resolve(3)];\n\n    Promise.all(iterable).then(function (value) {\n      assert(Array.isArray(value));\n      assert.deepEqual(value, [0, 1, 2, 3]);\n    }).then(done, failIfThrows(done));\n  });\n\n  it('rejects if any passed promise is rejected', function (done) {\n    var foreverPending = new Promise(function () { });\n    var error = new Error('Rejected');\n    var rejected = Promise.reject(error);\n\n    var iterable = [foreverPending, rejected];\n\n    Promise.all(iterable).then(\n      function () {\n        assert(false, 'should never get here');\n      },\n      function (reason) {\n        assert.strictEqual(reason, error);\n      }\n    ).then(done, failIfThrows(done));\n  });\n\n  it('resolves foreign thenables', function (done) {\n    var normal = Promise.resolve(1);\n    var foreign = { then: function (f) { f(2); } };\n\n    var iterable = [normal, foreign];\n\n    Promise.all(iterable).then(function (value) {\n      assert.deepEqual(value, [1, 2]);\n    }).then(done, failIfThrows(done));\n  });\n\n  it('fulfills when passed an sparse array, giving `undefined` for the omitted values', function (done) {\n    /* jshint elision: true */\n    /* jscs:disable disallowSpaceBeforeComma */\n    /* eslint-disable no-sparse-arrays */\n    var iterable = [Promise.resolve(0), , , Promise.resolve(1)];\n    /* eslint-enable no-sparse-arrays */\n    /* jscs:enable disallowSpaceBeforeComma */\n    /* jshint elision: false */\n\n    Promise.all(iterable).then(function (value) {\n      assert.deepEqual(value, [0, undefined, undefined, 1]);\n    }).then(done, failIfThrows(done));\n  });\n\n  it('does not modify the input array', function (done) {\n    var input = [0, 1];\n    var iterable = input;\n\n    Promise.all(iterable).then(function (value) {\n      assert.notStrictEqual(input, value);\n    }).then(done, failIfThrows(done));\n  });\n\n  it('should reject with a TypeError if given a non-iterable', function (done) {\n    var notIterable = {};\n\n    Promise.all(notIterable).then(\n      function () {\n        assert(false, 'should never get here');\n      },\n      function (reason) {\n        assert(reason instanceof TypeError);\n      }\n    ).then(done, failIfThrows(done));\n  });\n\n  // test cases from\n  // https://github.com/domenic/promises-unwrapping/issues/89#issuecomment-33110203\n  var tamper = function (p) {\n    p.then = function (fulfill, reject) {\n      fulfill('tampered');\n      return Promise.prototype.then.call(this, fulfill, reject);\n    };\n    return p;\n  };\n\n  it('should be robust against tampering (1)', function (done) {\n    var g = [tamper(Promise.resolve(0))];\n    // Prevent countdownHolder.[[Countdown]] from ever reaching zero\n    Promise.all(g).\n      then(function () { done(); }, failIfThrows(done));\n  });\n\n  it('should be robust against tampering (2)', function (done) {\n    // Promise from Promise.all resolved before arguments\n    var fulfillCalled = false;\n\n    var g = [\n      Promise.resolve(0),\n      tamper(Promise.resolve(1)),\n      Promise.resolve(2).then(function () {\n        assert(!fulfillCalled, 'should be resolved before all()');\n      }).then(function () {\n        assert(!fulfillCalled, 'should be resolved before all()');\n      })['catch'](failIfThrows(done))\n    ];\n    Promise.all(g).\n      then(function () {\n        assert(!fulfillCalled, 'should be resolved last');\n        fulfillCalled = true;\n      }).\n      then(done, failIfThrows(done));\n  });\n\n  it('should be robust against tampering (3)', function (done) {\n    var g = [\n      Promise.resolve(0),\n      tamper(Promise.resolve(1)),\n      Promise.reject(2)\n    ];\n    // Promise from Promise.all resolved despite rejected promise in arguments\n    Promise.all(g).\n      then(function () {\n        throw new Error('should not reach here!');\n      }, function (e) {\n        assert.strictEqual(e, 2);\n      }).then(done, failIfThrows(done));\n  });\n\n  it('should be robust against tampering (4)', function (done) {\n    var hijack = true;\n    var actualArguments = [];\n    var P = function (resolver) {\n      var self;\n      if (hijack) {\n        hijack = false;\n        self = new Promise(function (resolve, reject) {\n          return resolver(function (values) {\n            // record arguments & # of times resolve function is called\n            actualArguments.push(values.slice());\n            return resolve(values);\n          }, reject);\n        });\n      } else {\n        self = new Promise(resolver);\n      }\n      Object.setPrototypeOf(self, P.prototype);\n      return self;\n    };\n    if (!Object.setPrototypeOf) { return done(); } // skip test if on IE < 11\n    Object.setPrototypeOf(P, Promise);\n    P.prototype = Object.create(Promise.prototype, {\n      constructor: { value: P }\n    });\n    P.resolve = function (p) { return p; };\n\n    var g = [\n      Promise.resolve(0),\n      tamper(Promise.resolve(1)),\n      Promise.resolve(2)\n    ];\n\n    // Promise.all calls resolver twice\n    P.all(g)['catch'](failIfThrows(done));\n    Promise.\n      resolve().\n      then(function () {\n        assert.deepEqual(actualArguments, [[0, 'tampered', 2]]);\n      }).\n      then(done, failIfThrows(done));\n  });\n});\n"]}